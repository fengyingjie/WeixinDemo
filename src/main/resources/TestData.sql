INSERT INTO loginTBL(ID, ROOMID, Name, LoginTime) VALUES('304024','00202001','fengyingjie','20190114100603');
INSERT INTO loginTBL(ID, ROOMID, Name, LoginTime) VALUES('304001','00202001','test1','20180114100603');
INSERT INTO loginTBL(ID, ROOMID, Name, LoginTime) VALUES('304002','00202001','test3','20181114100603');
INSERT INTO APIKEYTBL(APPID, APIKEY, SECRETKEY, USEDTIME) VALUES('15433602','InOxOXpmnBH9bDqGZsF7sRI9','9LjGoh7yOkGSA1yE2AQFQYG9PbRfdytn',current_timestamp);
INSERT INTO APIKEYTBL(APPID, APIKEY, SECRETKEY, USEDTIME) VALUES('15435417','jF6aaHFsCRp7qbxXuHTl3X1Y','rHcOHwnSNpUpEtQcoqPbtDONOAcGZRIu',current_timestamp);
INSERT INTO APIKEYTBL(APPID, APIKEY, SECRETKEY, USEDTIME) VALUES('15435429','PU21tUq0jg2GyTFUfRaF13PE','4r2GWxd6dRGBzqgOpW6p90VR2YqqQNH1',current_timestamp);
INSERT INTO APIKEYTBL(APPID, APIKEY, SECRETKEY, USEDTIME) VALUES('15435434','iXEQkwmnBydnQO9izYUcfikj','yPhurNi29jXwIbelvTqMcYfNEHyTffD5',current_timestamp);
INSERT INTO APIKEYTBL(APPID, APIKEY, SECRETKEY, USEDTIME) VALUES('15435449','s2X6NfUtFrAKREYOykvvRMmq','daRUfva12U3SxnlX7m8GNNiiZ09yhXeS',current_timestamp);
INSERT INTO ROOMTBL(ROOMID, ROOMNAME, USEFLAG) VALUES('00202001','西安','1');
INSERT INTO ROOMTBL(ROOMID, ROOMNAME, USEFLAG) VALUES('00202002','北京','1');
INSERT INTO ROOMTBL(ROOMID, ROOMNAME, USEFLAG) VALUES('00202003','上海','1');

INSERT INTO USEROOMTBL(ROOMID, USERID, STARTTIME, ENDTIME) VALUES('00202001','304024',to_timestamp('20190121120000','YYYYMMDDHH24MISS'),to_timestamp('20190121150000','YYYYMMDDHH24MISS'));


SELECT
 ROOMTBL.ROOMNAME,
 loginTBL.Name,
 USEROOMTBL.STARTTIME,
 USEROOMTBL.ENDTIME
FROM ROOMTBL left join USEROOMTBL on(ROOMTBL.ROOMID = USEROOMTBL.ROOMID) left join loginTBL on (ROOMTBL.ROOMID = loginTBL.ROOMID and USEROOMTBL.USERID = loginTBL.ID)
WHERE
     ROOMTBL.ROOMNAME = ?
 AND loginTBL.NAME = ?
 AND USEROOMTBL.STARTTIME > to_timestamp(?,'YYYYMMDDHH24MISS')
 AND USEROOMTBL.ENDTIME < ?to_timestamp(?,'YYYYMMDDHH24MISS')
